var Indigio=window.Indigio||{};Indigio.css3Carousel={currentItemIndex:0,degFactor:0,spinnerDegrees:0,canvasWidth:0,carousel:null,spinner:null,items:null,pager:null,activeItem:null,options:{carouselClass:".carousel",spinnerClass:".spin-container",itemClass:".carousel-item",pagerClass:".carousel-pager",radius:0,createPager:true,pagerIndexName:"page",perspectiveOriginX:50,perspectiveOriginY:50,rotationCallback:null},init:function(e){var t=this;var n=0;this.options=$.extend(true,{},this.options,e);this.carousel=$(this.options.carouselClass);this.spinner=$(this.options.spinnerClass);this.items=$(this.options.carouselClass+" "+this.options.itemClass);this.items.css("position","absolute");this.activeItem=this.items.first().addClass("active");this.canvasWidth=this.carousel.width();this.degFactor=360/this.items.length;if(this.options.radius<1){this.options.radius=this.items.width()}this.createCSS3(this.items,"transform-style","preserve-3d");this.createCSS3(this.carousel,"transform-style","preserve-3d");this.createCSS3(this.carousel,"perspective",this.canvasWidth*2+"px");this.createCSS3(this.carousel,"perspective-origin",this.options.perspectiveOriginX+"%"+this.options.perspectiveOriginY+"%");this.createCSS3(this.spinner,"transform-style","preserve-3d");this.createCSS3(this.spinner,"transform-origin","50% 50% -"+this.options.radius+"px");this.items.each(function(e){t.createCSS3(this,"transform","rotateY("+n+"deg)");t.createCSS3(this,"transform-origin","50% 50% -"+t.options.radius+"px");$(this).css("left",t.canvasWidth/2-$(this).width()/2+"px");n+=t.degFactor});if(this.options.createPager){this.pager=$(this.options.pagerClass);this.displayPager();this.setupPager()}this.triggers()},triggers:function(){var e=this;$(".carousel-trigger-left").on("click",function(){e.rotate(-1)});$(".carousel-trigger-right").on("click",function(){e.rotate(1)})},createCSS3:function(e,t,n){var r=new Array("-webkit-"+t,"-moz-"+t,"-ms-"+t+"-webkit-"+t,"-o-"+t,t);$.each(r,function(t,r){$(e).css(r,n)})},displayPager:function(){var e=this.options.pagerIndexName;var t="<li class='"+e+"'></li>";for(i=0;i<this.items.length;i++){t="<li data-item-nr='"+i+"' class='"+e+" "+e+"-"+(i+1)+"'><a href='#'>"+(i+1)+"</a></li>";this.pager.append(t)}},rotate:function(e){var t=0;this.currentItemIndex+=e;if(e<0){e=Math.abs(e);if(e==1){if(this.activeItem.is(":first-child")){this.activeItem.removeClass("active");$(this.options.itemClass).last().addClass("active")}else{this.activeItem.removeClass("active").prev().addClass("active")}}else{this.activeItem.removeClass("active");$(this.items).eq(this.currentItemIndex).addClass("active")}}else if(e>0){e=-Math.abs(e);if(e==-1){if(this.activeItem.is(":last-child")){this.activeItem.removeClass("active");$(this.options.itemClass).first().addClass("active")}else{this.activeItem.removeClass("active").next().addClass("active")}}else{this.activeItem.removeClass("active");$(this.items).eq(this.currentItemIndex).addClass("active")}}t=e*this.degFactor;this.spinnerDegrees+=t;console.log("Steps: "+e);console.log("---------Degrees to turn-------->  "+t);this.activeItem=$(this.options.itemClass+".active");console.log("Spinner degs"+this.spinnerDegrees);this.createCSS3(this.spinner,"transform","rotateY("+this.spinnerDegrees+"deg)");this.currentItemIndex=$(this.activeItem).index();if(this.options.createPager){$("."+this.options.pagerIndexName).removeClass("active");$("."+this.options.pagerIndexName).eq(this.currentItemIndex).addClass("active")}console.log("Current Itemindex: "+this.currentItemIndex);if(this.options.rotationCallback!=null){this.options.rotationCallback()}},setupPager:function(){var e=this;var t=0;var n=0;$("."+this.options.pagerIndexName).first().addClass("active");$("."+this.options.pagerIndexName).on("click",function(r){r.preventDefault();t=$(this).index();n=t-e.currentItemIndex;if(e.currentItemIndex+e.items.length/2<t){console.log("Go left")}else{console.log("Go right!")}e.rotate(n)})}}